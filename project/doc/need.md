好的，我已经将你的项目目标、意图和详细需求整理成一份清晰的结构化文档。你可以直接将以下内容复制到你的项目文档中，作为与AI协作的上下文。

---

# 项目文档：电商平台商品推荐算法雏形开发

## 1. 项目概述

**项目名称**： 基于协同过滤的电商商品推荐系统MVP

**核心目标**： 快速开发一个推荐算法的雏形（Minimum Viable Product, MVP），优先实现**基于物品的协同过滤（Item-Based Collaborative Filtering）** 方法，并进行离线评估，为后续优化和实现更复杂算法打下基础。

**技术选型**： Python为核心开发语言，利用其强大的数据科学生态（pandas, numpy, scikit-learn）进行高效开发。

## 2. 核心需求与意图

1.  **快速验证可行性**：希望先实现一个基础但完整的工作流，而不是一个复杂但无法快速看到结果的系统。
2.  **从Item-Based CF开始**：经过评估，Item-Based CF相比User-Based CF更适合作为雏形，因其更稳定、可解释性强且易于开发。
3.  **使用模拟数据**：在获取真实数据前，需要程序生成符合真实业务逻辑的模拟用户行为数据来驱动开发和测试。
4.  **量化评估效果**：算法开发完成后，必须有一套科学的离线评估方法来衡量其推荐效果，而不仅仅是主观判断。
5.  **模块化开发**：系统应被分解为清晰、独立的模块，便于分步开发、测试和迭代。

## 3. 功能需求清单（To-Do List）

### 第一阶段：数据生成与准备
-   **模块名称**：数据模拟器 (`data_simulator.py`)
-   **输入**：用户数量、商品数量、商品类别列表、模拟行为数量等配置参数。
-   **输出**：一个包含模拟用户行为的CSV文件 (`interactions.csv`)。
-   **核心逻辑**：
    -   商品属性固定，每个商品都有一个主要类别（如：electronics, clothing, books）。
    -   为每个用户生成一个“偏好向量”，表示其对不同商品类别的喜好程度。
    -   模拟用户行为（点击、加购、收藏），行为概率应与其偏好向量强相关（例如，一个偏好“电子产品的用户”更可能点击电子产品）。
    -   行为应具有序列性（如：多次点击后才可能加购或收藏）。
    -   输出数据包含字段：`user_id`, `item_id`, `timestamp`, `interaction_type`。

### 第二阶段：核心算法实现
-   **模块名称**：数据预处理模块 (`data_processor.py`)
    -   **功能**：加载原始数据，清理，按时间划分训练集/测试集（如80%时间数据为训练集，后20%为测试集），并将交互行为转换为加权的用户-物品交互矩阵（点击=1，加购=3，收藏=3）。
-   **模块名称**：模型训练器（离线） (`model_trainer.py`)
    -   **功能**：使用训练集数据，计算物品间的余弦相似度，生成物品相似度矩阵，并将矩阵和映射字典（item_id到矩阵索引）保存为文件（.npy或.pkl）。
-   **模块名称**：推荐生成器（在线） (`recommender.py`)
    -   **功能**：加载相似度矩阵。实现函数 `get_recommendations(user_id, top_n=10)`，根据用户历史交互物品，为其生成Top-N推荐商品列表。

### 第三阶段：评估与系统整合
-   **模块名称**：评估模块 (`evaluator.py`)
    -   **功能**：在测试集上评估模型效果。对于测试集中的每个用户，仅使用其训练集时段的历史行为来生成推荐，并与测试集中的真实行为对比，计算**Precision@10**和**Recall@10**等核心指标。
-   **模块名称**：主程序/控制中心 (`main.py`)
    -   **功能**：提供命令行接口，串联整个流程。支持三种模式：
        -   `python main.py generate_data` (生成数据)
        -   `python main.py train_model` (训练模型)
        -   `python main.py evaluate` (评估模型)
        -   `python main.py recommend --user_id u123` (为指定用户推荐)

## 4. 对AI的协作指令

我正在开发上述项目，希望你作为**代码助手**和**技术顾问**，根据 **“功能需求清单”** 的顺序，协助我完成以下工作：

1.  **分步开发**：每次聚焦一个模块的代码实现。例如，首先帮助我们实现 **“数据模拟器 (data_simulator.py)”**。
2.  **提供代码**：提供符合需求的、可运行的Python代码片段。代码应包含必要的注释。
3.  **解释逻辑**：对代码中的关键算法或逻辑进行简要说明，确保我能理解。
4.  **下一步建议**：在完成一个模块后，建议下一个步骤或需要调整的地方。

